{"parents": [], "prev": null, "next": null, "title": "Modifying an Existing Package", "meta": {}, "body": "<section id=\"modifying-an-existing-package\">\n<h1>Modifying an Existing Package<a class=\"headerlink\" href=\"#modifying-an-existing-package\" title=\"Permalink to this heading\">#</a></h1>\n<dl class=\"simple\">\n<dt>You may want to modify an existing package to:</dt><dd><ul class=\"simple\">\n<li><p>Add a new method</p></li>\n<li><p>Swap out a plugin</p></li>\n<li><p>Add more specific business logic</p></li>\n</ul>\n</dd>\n</dl>\n<p>You can do this easily in Steamship!</p>\n<p>As an example, let\u2019s assume we want to change the <a class=\"reference external\" href=\"https://github.com/steamship-packages/audio-markdown\">audio-markdown</a>\npackage to use Assembly\u2019s speech to text instead of Whisper. The goal of the package is to automatically convert\naudio files to Markdown using specific spoken words to start and end elements.</p>\n<p>First, fork the the package repository.</p>\n<p>Change the package handle in <code class=\"docutils literal notranslate\"><span class=\"pre\">steamship.json</span></code> to a new unique value.  You should also update the <code class=\"docutils literal notranslate\"><span class=\"pre\">steamshipRegistry</span></code> section with your contact info.</p>\n<div class=\"highlight-json notranslate\"><div class=\"highlight\"><pre><span></span>{\n    &quot;type&quot;: &quot;package&quot;,\n    &quot;handle&quot;: &quot;audio-markdown-with-assembly&quot;, &lt;-- new value\n    ...\n}\n</pre></div>\n</div>\n<p>Now we can edit the code to use a different transcription plugin.  In a package, <code class=\"docutils literal notranslate\"><span class=\"pre\">src/api.py</span></code> contains the\nmain implementation. Looking in this file, we see that it is using the Whisper speech to text blockifier:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">BLOCKIFIER_HANDLE</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;whisper-s2t-blockifier&quot;</span>\n</pre></div>\n</div>\n<p>This handle is a reference to the plugin being used.  We also provide a <a class=\"reference external\" href=\"https://github.com/steamship-plugins/assemblyai-s2t-blockifier\">plugin</a> for transcription\nvia <a class=\"reference external\" href=\"assemblyai.com\">AssemblyAI</a>.  Its handle is <code class=\"docutils literal notranslate\"><span class=\"pre\">s2t-blockifier-default</span></code>.  If we replace the existing handle with this value,\nour package will use the AssemblyAI plugin instead:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">BLOCKIFIER_HANDLE</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;s2t-blockifier-default&quot;</span>\n</pre></div>\n</div>\n<p>That\u2019s it!  We can now deploy our new package using the Steamship CLI:</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>ship<span class=\"w\"> </span>deploy\n</pre></div>\n</div>\n<p>and use it like any other package.</p>\n<p>If we wanted to instead add functionality to the package, for example adding an RST output format,\nwe could add a new method to the package:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@post</span><span class=\"p\">(</span><span class=\"s2\">&quot;get_rst&quot;</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">get_rst</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">task_id</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">):</span>\n<span class=\"w\">    </span><span class=\"sd\">&quot;&quot;&quot;Get the rst for a transcribed audio file based on task_id.&quot;&quot;&quot;</span>\n\n    <span class=\"c1\"># implementation here</span>\n</pre></div>\n</div>\n</section>\n", "metatags": "<meta name=\"generator\" content=\"Docutils 0.17.1: http://docutils.sourceforge.net/\" />\n", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"]], "sourcename": "packages/cookbook/modifying-an-existing-package.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Modifying an Existing Package</a></li>\n</ul>\n", "display_toc": false, "page_source_suffix": ".rst", "current_page_name": "packages/cookbook/modifying-an-existing-package", "sidebars": ["sidebar/brand.html", "sidebar/search.html", "sidebar/scroll-start.html", "sidebar/navigation.html", "sidebar/ethical-ads.html", "sidebar/scroll-end.html", "sidebar/variant-selector.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.12", "furo_version": "2023.03.27", "furo_navigation_tree": "", "furo_hide_toc": true, "furo_pygments": {"light": {"background": "#f8f8f8", "foreground": "black"}, "dark": {"background": "#272822", "foreground": "#f8f8f2"}}}