{"parents": [{"link": "../../../../", "title": "Module code"}], "title": "steamship.agents.schema.context", "body": "<h1>Source code for steamship.agents.schema.context</h1><div class=\"highlight\"><pre>\n<span></span><span class=\"kn\">from</span> <span class=\"nn\">typing</span> <span class=\"kn\">import</span> <span class=\"n\">Any</span><span class=\"p\">,</span> <span class=\"n\">Callable</span><span class=\"p\">,</span> <span class=\"n\">Dict</span><span class=\"p\">,</span> <span class=\"n\">List</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">steamship</span> <span class=\"kn\">import</span> <span class=\"n\">Block</span><span class=\"p\">,</span> <span class=\"n\">Steamship</span><span class=\"p\">,</span> <span class=\"n\">Tag</span>\n<span class=\"kn\">from</span> <span class=\"nn\">steamship.agents.schema.action</span> <span class=\"kn\">import</span> <span class=\"n\">Action</span>\n\n<span class=\"n\">Metadata</span> <span class=\"o\">=</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]</span>\n<span class=\"n\">EmitFunc</span> <span class=\"o\">=</span> <span class=\"n\">Callable</span><span class=\"p\">[[</span><span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Block</span><span class=\"p\">],</span> <span class=\"n\">Metadata</span><span class=\"p\">],</span> <span class=\"kc\">None</span><span class=\"p\">]</span>\n\n\n<div class=\"viewcode-block\" id=\"AgentContext\"><a class=\"viewcode-back\" href=\"../../../../../api/steamship.agents.schema/#steamship.agents.schema.context.AgentContext\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">AgentContext</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"sd\">&quot;&quot;&quot;AgentContext contains all relevant information about a particular execution of an Agent. It is used by the</span>\n<span class=\"sd\">    AgentService to manage execution history as well as store/retrieve information and metadata that will be used</span>\n<span class=\"sd\">    in the process of an agent execution.</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n\n    <span class=\"c1\"># A steamship-assigned ID for this memory object</span>\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">id</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"nb\">str</span><span class=\"p\">:</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">chat_history</span><span class=\"o\">.</span><span class=\"n\">file</span><span class=\"o\">.</span><span class=\"n\">id</span>\n\n    <span class=\"n\">metadata</span><span class=\"p\">:</span> <span class=\"n\">Metadata</span>\n<span class=\"w\">    </span><span class=\"sd\">&quot;&quot;&quot;Allows storage of arbitrary information that may be useful for agents and tools.&quot;&quot;&quot;</span>\n\n    <span class=\"n\">client</span><span class=\"p\">:</span> <span class=\"n\">Steamship</span>\n<span class=\"w\">    </span><span class=\"sd\">&quot;&quot;&quot;Provides workspace-specific utilities for the agents and tools.&quot;&quot;&quot;</span>\n\n    <span class=\"n\">chat_history</span><span class=\"p\">:</span> <span class=\"s2\">&quot;ChatHistory&quot;</span>  <span class=\"c1\"># noqa: F821</span>\n<span class=\"w\">    </span><span class=\"sd\">&quot;&quot;&quot;Record of user-package messages. It records user submitted queries/prompts and the final</span>\n<span class=\"sd\">    agent-driven answer sent in response to those queries/prompts. It does NOT record any chat</span>\n<span class=\"sd\">    history related to agent execution and action selection.&quot;&quot;&quot;</span>\n\n    <span class=\"n\">completed_steps</span><span class=\"p\">:</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Action</span><span class=\"p\">]</span>\n<span class=\"w\">    </span><span class=\"sd\">&quot;&quot;&quot;Record of agent-selected Actions and their outputs. This provides an ordered look at the</span>\n<span class=\"sd\">    execution sequence for this context.&quot;&quot;&quot;</span>\n\n    <span class=\"c1\"># todo: in the future, this could be a set of callbacks like onError, onComplete, ...</span>\n    <span class=\"n\">emit_funcs</span><span class=\"p\">:</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">EmitFunc</span><span class=\"p\">]</span>\n<span class=\"w\">    </span><span class=\"sd\">&quot;&quot;&quot;Called when an agent execution has completed. These provide a way for the AgentService</span>\n<span class=\"sd\">    to return the result of an agent execution to the package that requested the agent execution.&quot;&quot;&quot;</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">metadata</span> <span class=\"o\">=</span> <span class=\"p\">{}</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">completed_steps</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">emit_funcs</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n\n<div class=\"viewcode-block\" id=\"AgentContext.get_or_create\"><a class=\"viewcode-back\" href=\"../../../../../api/steamship.agents.schema/#steamship.agents.schema.context.AgentContext.get_or_create\">[docs]</a>    <span class=\"nd\">@staticmethod</span>\n    <span class=\"k\">def</span> <span class=\"nf\">get_or_create</span><span class=\"p\">(</span>\n        <span class=\"n\">client</span><span class=\"p\">:</span> <span class=\"n\">Steamship</span><span class=\"p\">,</span>\n        <span class=\"n\">context_keys</span><span class=\"p\">:</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">],</span>\n        <span class=\"n\">tags</span><span class=\"p\">:</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Tag</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"n\">searchable</span><span class=\"p\">:</span> <span class=\"nb\">bool</span> <span class=\"o\">=</span> <span class=\"kc\">True</span><span class=\"p\">,</span>\n    <span class=\"p\">):</span>\n        <span class=\"kn\">from</span> <span class=\"nn\">steamship.agents.schema.chathistory</span> <span class=\"kn\">import</span> <span class=\"n\">ChatHistory</span>\n\n        <span class=\"n\">history</span> <span class=\"o\">=</span> <span class=\"n\">ChatHistory</span><span class=\"o\">.</span><span class=\"n\">get_or_create</span><span class=\"p\">(</span><span class=\"n\">client</span><span class=\"p\">,</span> <span class=\"n\">context_keys</span><span class=\"p\">,</span> <span class=\"n\">tags</span><span class=\"p\">,</span> <span class=\"n\">searchable</span><span class=\"o\">=</span><span class=\"n\">searchable</span><span class=\"p\">)</span>\n        <span class=\"n\">context</span> <span class=\"o\">=</span> <span class=\"n\">AgentContext</span><span class=\"p\">()</span>\n        <span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">chat_history</span> <span class=\"o\">=</span> <span class=\"n\">history</span>\n        <span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">client</span> <span class=\"o\">=</span> <span class=\"n\">client</span>\n        <span class=\"k\">return</span> <span class=\"n\">context</span></div></div>\n</pre></div>", "current_page_name": "_modules/steamship/agents/schema/context", "sidebars": ["sidebar/brand.html", "sidebar/search.html", "sidebar/scroll-start.html", "sidebar/navigation.html", "sidebar/ethical-ads.html", "sidebar/scroll-end.html", "sidebar/variant-selector.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.12", "furo_version": "2023.03.27", "furo_navigation_tree": "", "furo_hide_toc": true, "furo_pygments": {"light": {"background": "#f8f8f8", "foreground": "black"}, "dark": {"background": "#272822", "foreground": "#f8f8f2"}}}