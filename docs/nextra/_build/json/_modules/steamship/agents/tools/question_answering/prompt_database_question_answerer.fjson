{"parents": [{"link": "../../../../../", "title": "Module code"}], "title": "steamship.agents.tools.question_answering.prompt_database_question_answerer", "body": "<h1>Source code for steamship.agents.tools.question_answering.prompt_database_question_answerer</h1><div class=\"highlight\"><pre>\n<span></span><span class=\"kn\">from</span> <span class=\"nn\">typing</span> <span class=\"kn\">import</span> <span class=\"n\">List</span><span class=\"p\">,</span> <span class=\"n\">Optional</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">steamship</span> <span class=\"kn\">import</span> <span class=\"n\">Steamship</span>\n<span class=\"kn\">from</span> <span class=\"nn\">steamship.agents.llms</span> <span class=\"kn\">import</span> <span class=\"n\">OpenAI</span>\n<span class=\"kn\">from</span> <span class=\"nn\">steamship.agents.tools.text_generation.text_rewrite_tool</span> <span class=\"kn\">import</span> <span class=\"n\">TextRewritingTool</span>\n<span class=\"kn\">from</span> <span class=\"nn\">steamship.agents.utils</span> <span class=\"kn\">import</span> <span class=\"n\">with_llm</span>\n<span class=\"kn\">from</span> <span class=\"nn\">steamship.utils.repl</span> <span class=\"kn\">import</span> <span class=\"n\">ToolREPL</span>\n\n<span class=\"n\">DEFAULT_FACTS</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"s2\">&quot;New York City has 424 subway stations&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;Boston has 51 subway stations&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;Washington, DC has 97 subway stations&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;San Francisco has 47 subway stations&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;Miami has 23 subway stations&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;Los Angeles has 16 subway stations&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;Chicago has 145 subway stations&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;Baltimore has 14 subway stations&quot;</span><span class=\"p\">,</span>\n<span class=\"p\">]</span>\n\n<span class=\"n\">DEFAULT_QUESTION_ANSWERING_PROMPT</span> <span class=\"o\">=</span> <span class=\"p\">(</span>\n    <span class=\"s2\">&quot;Use the following pieces of memory to answer the question at the end. &quot;</span>\n<span class=\"w\">    </span><span class=\"sd\">&quot;&quot;&quot;If you don&#39;t know the answer, just say that you don&#39;t know, don&#39;t try to make up an answer.</span>\n\n<span class=\"sd\">{source_text}</span>\n\n<span class=\"sd\">Question: {{input}}</span>\n\n<span class=\"sd\">Helpful Answer:&quot;&quot;&quot;</span>\n<span class=\"p\">)</span>\n\n\n<div class=\"viewcode-block\" id=\"PromptDatabaseQATool\"><a class=\"viewcode-back\" href=\"../../../../../../api/steamship.agents.tools.question_answering/#steamship.agents.tools.question_answering.prompt_database_question_answerer.PromptDatabaseQATool\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">PromptDatabaseQATool</span><span class=\"p\">(</span><span class=\"n\">TextRewritingTool</span><span class=\"p\">):</span>\n<span class=\"w\">    </span><span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">    Example tool to illustrate how one can create a tool with a mini database embedded in a prompt.</span>\n\n<span class=\"sd\">    To use:</span>\n\n<span class=\"sd\">        tool = PromptDatabaseQATool(</span>\n<span class=\"sd\">            facts=[</span>\n<span class=\"sd\">                &quot;Sentence with fact 1&quot;,</span>\n<span class=\"sd\">                &quot;Sentence with fact 2&quot;</span>\n<span class=\"sd\">            ],</span>\n<span class=\"sd\">            ai_description=&quot;Used to answer questions about SPECIFIC_THING. &quot;</span>\n<span class=\"sd\">                           &quot;The input is the question and the output is the answer.&quot;</span>\n<span class=\"sd\">        )</span>\n\n<span class=\"sd\">    &quot;&quot;&quot;</span>  <span class=\"c1\"># noqa: RST203, RST301</span>\n\n    <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;PromptDatabaseQATool&quot;</span>\n    <span class=\"n\">human_description</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;Answers questions about the number of subway stations in US cities.&quot;</span>\n    <span class=\"n\">agent_description</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;Used to answer questions about the number of subway stations in US cities. The input is the question about subway stations. The output is the answer as a sentence.&quot;</span>\n    <span class=\"n\">question_answering_prompt</span><span class=\"p\">:</span> <span class=\"n\">Optional</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">DEFAULT_QUESTION_ANSWERING_PROMPT</span>\n    <span class=\"n\">facts</span><span class=\"p\">:</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">DEFAULT_FACTS</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">facts</span><span class=\"p\">:</span> <span class=\"n\">Optional</span><span class=\"p\">[</span><span class=\"n\">List</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">]]</span> <span class=\"o\">=</span> <span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n        <span class=\"n\">_rewrite_prompt</span> <span class=\"o\">=</span> <span class=\"n\">kwargs</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">&quot;question_answering_prompt&quot;</span><span class=\"p\">,</span> <span class=\"n\">DEFAULT_QUESTION_ANSWERING_PROMPT</span><span class=\"p\">)</span>\n        <span class=\"n\">_fact_list</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"sa\">f</span><span class=\"s2\">&quot;- </span><span class=\"si\">{</span><span class=\"n\">fact</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span> <span class=\"k\">for</span> <span class=\"n\">fact</span> <span class=\"ow\">in</span> <span class=\"n\">facts</span> <span class=\"ow\">or</span> <span class=\"n\">DEFAULT_FACTS</span><span class=\"p\">]</span>\n\n        <span class=\"n\">kwargs</span><span class=\"p\">[</span><span class=\"s2\">&quot;rewrite_prompt&quot;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">kwargs</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span>\n            <span class=\"s2\">&quot;rewrite_prompt&quot;</span><span class=\"p\">,</span> <span class=\"n\">_rewrite_prompt</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">source_text</span><span class=\"o\">=</span><span class=\"s2\">&quot;</span><span class=\"se\">\\n</span><span class=\"s2\">&quot;</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">_fact_list</span><span class=\"p\">))</span>\n        <span class=\"p\">)</span>\n        <span class=\"nb\">super</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span></div>\n\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s2\">&quot;__main__&quot;</span><span class=\"p\">:</span>\n    <span class=\"n\">tool</span> <span class=\"o\">=</span> <span class=\"n\">PromptDatabaseQATool</span><span class=\"p\">()</span>\n    <span class=\"k\">with</span> <span class=\"n\">Steamship</span><span class=\"o\">.</span><span class=\"n\">temporary_workspace</span><span class=\"p\">()</span> <span class=\"k\">as</span> <span class=\"n\">client</span><span class=\"p\">:</span>\n        <span class=\"n\">ToolREPL</span><span class=\"p\">(</span><span class=\"n\">tool</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">run_with_client</span><span class=\"p\">(</span><span class=\"n\">client</span><span class=\"o\">=</span><span class=\"n\">client</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"o\">=</span><span class=\"n\">with_llm</span><span class=\"p\">(</span><span class=\"n\">llm</span><span class=\"o\">=</span><span class=\"n\">OpenAI</span><span class=\"p\">(</span><span class=\"n\">client</span><span class=\"o\">=</span><span class=\"n\">client</span><span class=\"p\">)))</span>\n</pre></div>", "current_page_name": "_modules/steamship/agents/tools/question_answering/prompt_database_question_answerer", "sidebars": ["sidebar/brand.html", "sidebar/search.html", "sidebar/scroll-start.html", "sidebar/navigation.html", "sidebar/ethical-ads.html", "sidebar/scroll-end.html", "sidebar/variant-selector.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.12", "furo_version": "2023.03.27", "furo_navigation_tree": "", "furo_hide_toc": true, "furo_pygments": {"light": {"background": "#f8f8f8", "foreground": "black"}, "dark": {"background": "#272822", "foreground": "#f8f8f2"}}}