{"parents": [{"link": "../../../", "title": "Module code"}], "title": "steamship.cli.deploy", "body": "<h1>Source code for steamship.cli.deploy</h1><div class=\"highlight\"><pre>\n<span></span><span class=\"kn\">import</span> <span class=\"nn\">os</span>\n<span class=\"kn\">import</span> <span class=\"nn\">zipfile</span>\n<span class=\"kn\">from</span> <span class=\"nn\">abc</span> <span class=\"kn\">import</span> <span class=\"n\">ABC</span><span class=\"p\">,</span> <span class=\"n\">abstractmethod</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pathlib</span> <span class=\"kn\">import</span> <span class=\"n\">Path</span>\n\n<span class=\"kn\">import</span> <span class=\"nn\">click</span>\n<span class=\"kn\">from</span> <span class=\"nn\">semver</span> <span class=\"kn\">import</span> <span class=\"n\">VersionInfo</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">steamship</span> <span class=\"kn\">import</span> <span class=\"n\">Package</span><span class=\"p\">,</span> <span class=\"n\">PackageVersion</span><span class=\"p\">,</span> <span class=\"n\">PluginVersion</span><span class=\"p\">,</span> <span class=\"n\">Steamship</span><span class=\"p\">,</span> <span class=\"n\">SteamshipError</span>\n<span class=\"kn\">from</span> <span class=\"nn\">steamship.cli.manifest_init_wizard</span> <span class=\"kn\">import</span> <span class=\"n\">validate_handle</span><span class=\"p\">,</span> <span class=\"n\">validate_version_handle</span>\n<span class=\"kn\">from</span> <span class=\"nn\">steamship.cli.ship_spinner</span> <span class=\"kn\">import</span> <span class=\"n\">ship_spinner</span>\n<span class=\"kn\">from</span> <span class=\"nn\">steamship.cli.utils</span> <span class=\"kn\">import</span> <span class=\"n\">find_api_py</span><span class=\"p\">,</span> <span class=\"n\">get_api_module</span>\n<span class=\"kn\">from</span> <span class=\"nn\">steamship.data</span> <span class=\"kn\">import</span> <span class=\"n\">Plugin</span>\n<span class=\"kn\">from</span> <span class=\"nn\">steamship.data.manifest</span> <span class=\"kn\">import</span> <span class=\"n\">Manifest</span>\n<span class=\"kn\">from</span> <span class=\"nn\">steamship.data.user</span> <span class=\"kn\">import</span> <span class=\"n\">User</span>\n<span class=\"kn\">from</span> <span class=\"nn\">steamship.invocable.lambda_handler</span> <span class=\"kn\">import</span> <span class=\"n\">get_class_from_module</span>\n\n<span class=\"n\">DEFAULT_BUILD_IGNORE</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"s2\">&quot;build&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;.git&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;.venv&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;.ipynb_checkpoints&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;.DS_Store&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;venv&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;tests&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;examples&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;.idea&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;__pycache__&quot;</span><span class=\"p\">,</span>\n<span class=\"p\">]</span>\n\n\n<div class=\"viewcode-block\" id=\"update_config_template\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.deploy.update_config_template\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">update_config_template</span><span class=\"p\">(</span><span class=\"n\">manifest</span><span class=\"p\">:</span> <span class=\"n\">Manifest</span><span class=\"p\">):</span>\n    <span class=\"n\">path</span> <span class=\"o\">=</span> <span class=\"n\">find_api_py</span><span class=\"p\">()</span>\n    <span class=\"n\">api_module</span> <span class=\"o\">=</span> <span class=\"n\">get_api_module</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">)</span>\n    <span class=\"n\">invocable_type</span> <span class=\"o\">=</span> <span class=\"n\">get_class_from_module</span><span class=\"p\">(</span><span class=\"n\">api_module</span><span class=\"p\">)</span>\n\n    <span class=\"n\">config_parameters</span> <span class=\"o\">=</span> <span class=\"n\">invocable_type</span><span class=\"o\">.</span><span class=\"n\">config_cls</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">get_config_parameters</span><span class=\"p\">()</span>\n\n    <span class=\"k\">if</span> <span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">configTemplate</span> <span class=\"o\">!=</span> <span class=\"n\">config_parameters</span><span class=\"p\">:</span>\n        <span class=\"k\">if</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">config_parameters</span><span class=\"p\">)</span> <span class=\"o\">&gt;</span> <span class=\"mi\">0</span><span class=\"p\">:</span>\n            <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">secho</span><span class=\"p\">(</span><span class=\"s2\">&quot;Config parameters changed; updating steamship.json.&quot;</span><span class=\"p\">,</span> <span class=\"n\">fg</span><span class=\"o\">=</span><span class=\"s2\">&quot;cyan&quot;</span><span class=\"p\">)</span>\n            <span class=\"k\">for</span> <span class=\"n\">param_name</span><span class=\"p\">,</span> <span class=\"n\">param</span> <span class=\"ow\">in</span> <span class=\"n\">config_parameters</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"p\">():</span>\n                <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">echo</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">&quot;</span><span class=\"si\">{</span><span class=\"n\">param_name</span><span class=\"si\">}</span><span class=\"s2\">:&quot;</span><span class=\"p\">)</span>\n                <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">echo</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">&quot;</span><span class=\"se\">\\t</span><span class=\"s2\">Type: </span><span class=\"si\">{</span><span class=\"n\">param</span><span class=\"o\">.</span><span class=\"n\">type</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span><span class=\"p\">)</span>\n                <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">echo</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">&quot;</span><span class=\"se\">\\t</span><span class=\"s2\">Default: </span><span class=\"si\">{</span><span class=\"n\">param</span><span class=\"o\">.</span><span class=\"n\">default</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span><span class=\"p\">)</span>\n                <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">echo</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">&quot;</span><span class=\"se\">\\t</span><span class=\"s2\">Description: </span><span class=\"si\">{</span><span class=\"n\">param</span><span class=\"o\">.</span><span class=\"n\">description</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span><span class=\"p\">)</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">secho</span><span class=\"p\">(</span><span class=\"s2\">&quot;Config parameters removed; updating steamship.json.&quot;</span><span class=\"p\">,</span> <span class=\"n\">fg</span><span class=\"o\">=</span><span class=\"s2\">&quot;cyan&quot;</span><span class=\"p\">)</span>\n\n    <span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">configTemplate</span> <span class=\"o\">=</span> <span class=\"n\">config_parameters</span>\n    <span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span></div>\n\n\n<div class=\"viewcode-block\" id=\"get_archive_path\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.deploy.get_archive_path\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">get_archive_path</span><span class=\"p\">(</span><span class=\"n\">manifest</span><span class=\"p\">:</span> <span class=\"n\">Manifest</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">Path</span><span class=\"p\">:</span>\n    <span class=\"k\">return</span> <span class=\"n\">Path</span><span class=\"p\">(</span><span class=\"s2\">&quot;.&quot;</span><span class=\"p\">)</span> <span class=\"o\">/</span> <span class=\"s2\">&quot;build&quot;</span> <span class=\"o\">/</span> <span class=\"s2\">&quot;archives&quot;</span> <span class=\"o\">/</span> <span class=\"sa\">f</span><span class=\"s2\">&quot;</span><span class=\"si\">{</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">handle</span><span class=\"si\">}</span><span class=\"s2\">_v</span><span class=\"si\">{</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">version</span><span class=\"si\">}</span><span class=\"s2\">.zip&quot;</span></div>\n\n\n<div class=\"viewcode-block\" id=\"bundle_deployable\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.deploy.bundle_deployable\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">bundle_deployable</span><span class=\"p\">(</span><span class=\"n\">manifest</span><span class=\"p\">:</span> <span class=\"n\">Manifest</span><span class=\"p\">):</span>\n    <span class=\"n\">archive_path</span> <span class=\"o\">=</span> <span class=\"n\">get_archive_path</span><span class=\"p\">(</span><span class=\"n\">manifest</span><span class=\"p\">)</span>\n    <span class=\"n\">archive_path</span><span class=\"o\">.</span><span class=\"n\">parent</span><span class=\"o\">.</span><span class=\"n\">mkdir</span><span class=\"p\">(</span><span class=\"n\">parents</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">exist_ok</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n    <span class=\"n\">excludes</span> <span class=\"o\">=</span> <span class=\"n\">DEFAULT_BUILD_IGNORE</span> <span class=\"o\">+</span> <span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">build_config</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">&quot;ignore&quot;</span><span class=\"p\">,</span> <span class=\"p\">[])</span>\n\n    <span class=\"n\">archive_path</span><span class=\"o\">.</span><span class=\"n\">unlink</span><span class=\"p\">(</span><span class=\"n\">missing_ok</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n\n    <span class=\"c1\"># This zipfile packaging is modeled after the typescript CLI.</span>\n    <span class=\"c1\"># Items in non-excluded root folders are moved to the top-level.</span>\n\n    <span class=\"k\">with</span> <span class=\"n\">zipfile</span><span class=\"o\">.</span><span class=\"n\">ZipFile</span><span class=\"p\">(</span>\n        <span class=\"n\">file</span><span class=\"o\">=</span><span class=\"n\">archive_path</span><span class=\"p\">,</span> <span class=\"n\">mode</span><span class=\"o\">=</span><span class=\"s2\">&quot;a&quot;</span><span class=\"p\">,</span> <span class=\"n\">compression</span><span class=\"o\">=</span><span class=\"n\">zipfile</span><span class=\"o\">.</span><span class=\"n\">ZIP_DEFLATED</span><span class=\"p\">,</span> <span class=\"n\">allowZip64</span><span class=\"o\">=</span><span class=\"kc\">False</span>\n    <span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">zip_file</span><span class=\"p\">:</span>\n\n        <span class=\"n\">root</span> <span class=\"o\">=</span> <span class=\"n\">Path</span><span class=\"p\">(</span><span class=\"s2\">&quot;.&quot;</span><span class=\"p\">)</span>\n        <span class=\"k\">for</span> <span class=\"n\">file_path</span> <span class=\"ow\">in</span> <span class=\"n\">root</span><span class=\"o\">.</span><span class=\"n\">iterdir</span><span class=\"p\">():</span>\n            <span class=\"k\">if</span> <span class=\"n\">file_path</span><span class=\"o\">.</span><span class=\"n\">name</span> <span class=\"ow\">not</span> <span class=\"ow\">in</span> <span class=\"n\">excludes</span><span class=\"p\">:</span>\n                <span class=\"k\">if</span> <span class=\"n\">file_path</span><span class=\"o\">.</span><span class=\"n\">is_dir</span><span class=\"p\">():</span>\n                    <span class=\"k\">for</span> <span class=\"n\">directory</span><span class=\"p\">,</span> <span class=\"n\">_</span><span class=\"p\">,</span> <span class=\"n\">files</span> <span class=\"ow\">in</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">walk</span><span class=\"p\">(</span><span class=\"n\">file_path</span><span class=\"p\">):</span>\n                        <span class=\"n\">subdirectory_path</span> <span class=\"o\">=</span> <span class=\"n\">Path</span><span class=\"p\">(</span><span class=\"n\">directory</span><span class=\"p\">)</span>\n                        <span class=\"k\">if</span> <span class=\"n\">Path</span><span class=\"p\">(</span><span class=\"n\">directory</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">name</span> <span class=\"ow\">not</span> <span class=\"ow\">in</span> <span class=\"n\">excludes</span><span class=\"p\">:</span>\n                            <span class=\"k\">for</span> <span class=\"n\">file</span> <span class=\"ow\">in</span> <span class=\"n\">files</span><span class=\"p\">:</span>\n                                <span class=\"n\">pypi_file</span> <span class=\"o\">=</span> <span class=\"n\">subdirectory_path</span> <span class=\"o\">/</span> <span class=\"n\">file</span>\n                                <span class=\"n\">relative_to</span> <span class=\"o\">=</span> <span class=\"n\">pypi_file</span><span class=\"o\">.</span><span class=\"n\">relative_to</span><span class=\"p\">(</span><span class=\"n\">file_path</span><span class=\"p\">)</span>\n                                <span class=\"n\">zip_file</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"n\">pypi_file</span><span class=\"p\">,</span> <span class=\"n\">relative_to</span><span class=\"p\">)</span>\n\n                <span class=\"k\">else</span><span class=\"p\">:</span>\n                    <span class=\"n\">zip_file</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"n\">file_path</span><span class=\"p\">)</span></div>\n\n\n<div class=\"viewcode-block\" id=\"DeployableDeployer\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.deploy.DeployableDeployer\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">DeployableDeployer</span><span class=\"p\">(</span><span class=\"n\">ABC</span><span class=\"p\">):</span>\n    <span class=\"nd\">@abstractmethod</span>\n    <span class=\"k\">def</span> <span class=\"nf\">_create_version</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">client</span><span class=\"p\">:</span> <span class=\"n\">Steamship</span><span class=\"p\">,</span> <span class=\"n\">manifest</span><span class=\"p\">:</span> <span class=\"n\">Manifest</span><span class=\"p\">,</span> <span class=\"n\">thing_id</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">):</span>\n        <span class=\"k\">pass</span>\n\n<div class=\"viewcode-block\" id=\"DeployableDeployer.create_object\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.deploy.DeployableDeployer.create_object\">[docs]</a>    <span class=\"nd\">@abstractmethod</span>\n    <span class=\"k\">def</span> <span class=\"nf\">create_object</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">client</span><span class=\"p\">:</span> <span class=\"n\">Steamship</span><span class=\"p\">,</span> <span class=\"n\">manifest</span><span class=\"p\">:</span> <span class=\"n\">Manifest</span><span class=\"p\">):</span>\n        <span class=\"k\">pass</span></div>\n\n<div class=\"viewcode-block\" id=\"DeployableDeployer.update_object\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.deploy.DeployableDeployer.update_object\">[docs]</a>    <span class=\"nd\">@abstractmethod</span>\n    <span class=\"k\">def</span> <span class=\"nf\">update_object</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">deployable</span><span class=\"p\">,</span> <span class=\"n\">client</span><span class=\"p\">:</span> <span class=\"n\">Steamship</span><span class=\"p\">,</span> <span class=\"n\">manifest</span><span class=\"p\">:</span> <span class=\"n\">Manifest</span><span class=\"p\">):</span>\n        <span class=\"k\">pass</span></div>\n\n<div class=\"viewcode-block\" id=\"DeployableDeployer.deployable_type\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.deploy.DeployableDeployer.deployable_type\">[docs]</a>    <span class=\"nd\">@abstractmethod</span>\n    <span class=\"k\">def</span> <span class=\"nf\">deployable_type</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">pass</span></div>\n\n<div class=\"viewcode-block\" id=\"DeployableDeployer.create_or_fetch_deployable\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.deploy.DeployableDeployer.create_or_fetch_deployable\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">create_or_fetch_deployable</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">client</span><span class=\"p\">:</span> <span class=\"n\">Steamship</span><span class=\"p\">,</span> <span class=\"n\">user</span><span class=\"p\">:</span> <span class=\"n\">User</span><span class=\"p\">,</span> <span class=\"n\">manifest</span><span class=\"p\">:</span> <span class=\"n\">Manifest</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">handle</span> <span class=\"ow\">or</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">handle</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"mi\">0</span><span class=\"p\">:</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">ask_for_new_handle</span><span class=\"p\">(</span><span class=\"n\">manifest</span><span class=\"p\">,</span> <span class=\"n\">was_missing</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n\n        <span class=\"n\">deployable</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n        <span class=\"k\">while</span> <span class=\"n\">deployable</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">echo</span><span class=\"p\">(</span>\n                <span class=\"sa\">f</span><span class=\"s2\">&quot;Creating / fetching </span><span class=\"si\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">deployable_type</span><span class=\"p\">()</span><span class=\"si\">}</span><span class=\"s2\"> with handle [</span><span class=\"si\">{</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">handle</span><span class=\"si\">}</span><span class=\"s2\">]... &quot;</span><span class=\"p\">,</span>\n                <span class=\"n\">nl</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">,</span>\n            <span class=\"p\">)</span>\n            <span class=\"k\">try</span><span class=\"p\">:</span>\n                <span class=\"n\">deployable</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">create_object</span><span class=\"p\">(</span><span class=\"n\">client</span><span class=\"p\">,</span> <span class=\"n\">manifest</span><span class=\"p\">)</span>\n                <span class=\"k\">if</span> <span class=\"n\">deployable</span><span class=\"o\">.</span><span class=\"n\">user_id</span> <span class=\"o\">!=</span> <span class=\"n\">user</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"p\">:</span>\n                    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">ask_for_new_handle</span><span class=\"p\">(</span><span class=\"n\">manifest</span><span class=\"p\">)</span>\n                    <span class=\"n\">deployable</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n            <span class=\"k\">except</span> <span class=\"n\">SteamshipError</span> <span class=\"k\">as</span> <span class=\"n\">e</span><span class=\"p\">:</span>\n                <span class=\"k\">if</span> <span class=\"n\">e</span><span class=\"o\">.</span><span class=\"n\">message</span> <span class=\"o\">==</span> <span class=\"s2\">&quot;Something went wrong.&quot;</span><span class=\"p\">:</span>\n                    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">ask_for_new_handle</span><span class=\"p\">(</span><span class=\"n\">manifest</span><span class=\"p\">)</span>\n                <span class=\"k\">else</span><span class=\"p\">:</span>\n                    <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">secho</span><span class=\"p\">(</span>\n                        <span class=\"sa\">f</span><span class=\"s2\">&quot;Unable to create / fetch </span><span class=\"si\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">deployable_type</span><span class=\"p\">()</span><span class=\"si\">}</span><span class=\"s2\">. Server returned message: </span><span class=\"si\">{</span><span class=\"n\">e</span><span class=\"o\">.</span><span class=\"n\">message</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span>\n                    <span class=\"p\">)</span>\n                    <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">get_current_context</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">abort</span><span class=\"p\">()</span>\n\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">update_object</span><span class=\"p\">(</span><span class=\"n\">deployable</span><span class=\"p\">,</span> <span class=\"n\">client</span><span class=\"p\">,</span> <span class=\"n\">manifest</span><span class=\"p\">)</span>\n\n        <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">echo</span><span class=\"p\">(</span><span class=\"s2\">&quot;Done.&quot;</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">deployable</span></div>\n\n<div class=\"viewcode-block\" id=\"DeployableDeployer.ask_for_new_handle\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.deploy.DeployableDeployer.ask_for_new_handle\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">ask_for_new_handle</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">manifest</span><span class=\"p\">:</span> <span class=\"n\">Manifest</span><span class=\"p\">,</span> <span class=\"n\">was_missing</span><span class=\"p\">:</span> <span class=\"nb\">bool</span> <span class=\"o\">=</span> <span class=\"kc\">False</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">was_missing</span><span class=\"p\">:</span>\n            <span class=\"n\">try_again</span> <span class=\"o\">=</span> <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">confirm</span><span class=\"p\">(</span>\n                <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">style</span><span class=\"p\">(</span>\n                    <span class=\"sa\">f</span><span class=\"s2\">&quot;</span><span class=\"se\">\\n</span><span class=\"s2\">It looks like that handle [</span><span class=\"si\">{</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">handle</span><span class=\"si\">}</span><span class=\"s2\">] is already in use. Would you like to change the handle and try again?&quot;</span><span class=\"p\">,</span>\n                    <span class=\"n\">fg</span><span class=\"o\">=</span><span class=\"s2\">&quot;yellow&quot;</span><span class=\"p\">,</span>\n                <span class=\"p\">),</span>\n                <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n            <span class=\"p\">)</span>\n            <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">try_again</span><span class=\"p\">:</span>\n                <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">get_current_context</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">abort</span><span class=\"p\">()</span>\n\n        <span class=\"n\">new_handle</span> <span class=\"o\">=</span> <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">prompt</span><span class=\"p\">(</span>\n            <span class=\"sa\">f</span><span class=\"s2\">&quot;What handle would you like to use for your </span><span class=\"si\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">deployable_type</span><span class=\"p\">()</span><span class=\"si\">}</span><span class=\"s2\">? Valid characters are a-z and -&quot;</span><span class=\"p\">,</span>\n            <span class=\"n\">value_proc</span><span class=\"o\">=</span><span class=\"n\">validate_handle</span><span class=\"p\">,</span>\n        <span class=\"p\">)</span>\n        <span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">handle</span> <span class=\"o\">=</span> <span class=\"n\">new_handle</span>\n        <span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span></div>\n\n<div class=\"viewcode-block\" id=\"DeployableDeployer.create_version\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.deploy.DeployableDeployer.create_version\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">create_version</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">client</span><span class=\"p\">:</span> <span class=\"n\">Steamship</span><span class=\"p\">,</span> <span class=\"n\">manifest</span><span class=\"p\">:</span> <span class=\"n\">Manifest</span><span class=\"p\">,</span> <span class=\"n\">thing_id</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">):</span>\n        <span class=\"n\">version</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">version</span> <span class=\"ow\">or</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">version</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"mi\">0</span><span class=\"p\">:</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">ask_for_new_version_handle</span><span class=\"p\">(</span><span class=\"n\">manifest</span><span class=\"p\">,</span> <span class=\"n\">was_missing</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n\n        <span class=\"k\">while</span> <span class=\"n\">version</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">echo</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">&quot;Deploying version </span><span class=\"si\">{</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">version</span><span class=\"si\">}</span><span class=\"s2\"> of [</span><span class=\"si\">{</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">handle</span><span class=\"si\">}</span><span class=\"s2\">]... &quot;</span><span class=\"p\">,</span> <span class=\"n\">nl</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n            <span class=\"k\">try</span><span class=\"p\">:</span>\n                <span class=\"k\">with</span> <span class=\"n\">ship_spinner</span><span class=\"p\">():</span>\n                    <span class=\"n\">version</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_create_version</span><span class=\"p\">(</span><span class=\"n\">client</span><span class=\"p\">,</span> <span class=\"n\">manifest</span><span class=\"p\">,</span> <span class=\"n\">thing_id</span><span class=\"p\">)</span>\n            <span class=\"k\">except</span> <span class=\"n\">SteamshipError</span> <span class=\"k\">as</span> <span class=\"n\">e</span><span class=\"p\">:</span>\n                <span class=\"k\">if</span> <span class=\"s2\">&quot;The object you are trying to create already exists.&quot;</span> <span class=\"ow\">in</span> <span class=\"n\">e</span><span class=\"o\">.</span><span class=\"n\">message</span><span class=\"p\">:</span>\n                    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">ask_for_new_version_handle</span><span class=\"p\">(</span><span class=\"n\">manifest</span><span class=\"p\">)</span>\n                <span class=\"k\">else</span><span class=\"p\">:</span>\n                    <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">secho</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">&quot;</span><span class=\"se\">\\n</span><span class=\"s2\">Unable to deploy </span><span class=\"si\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">deployable_type</span><span class=\"p\">()</span><span class=\"si\">}</span><span class=\"s2\"> version.&quot;</span><span class=\"p\">,</span> <span class=\"n\">fg</span><span class=\"o\">=</span><span class=\"s2\">&quot;red&quot;</span><span class=\"p\">)</span>\n                    <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">secho</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">&quot;Server returned message: </span><span class=\"si\">{</span><span class=\"n\">e</span><span class=\"o\">.</span><span class=\"n\">message</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span><span class=\"p\">)</span>\n                    <span class=\"k\">if</span> <span class=\"s2\">&quot;ModuleNotFoundError&quot;</span> <span class=\"ow\">in</span> <span class=\"n\">e</span><span class=\"o\">.</span><span class=\"n\">message</span><span class=\"p\">:</span>\n                        <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">secho</span><span class=\"p\">(</span>\n                            <span class=\"s2\">&quot;It looks like you may be missing a dependency in your requirements.txt.&quot;</span><span class=\"p\">,</span>\n                            <span class=\"n\">fg</span><span class=\"o\">=</span><span class=\"s2\">&quot;yellow&quot;</span><span class=\"p\">,</span>\n                        <span class=\"p\">)</span>\n                    <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">get_current_context</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">abort</span><span class=\"p\">()</span>\n        <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">echo</span><span class=\"p\">(</span><span class=\"s2\">&quot;</span><span class=\"se\">\\n</span><span class=\"s2\">Done. \ud83d\udea2&quot;</span><span class=\"p\">)</span></div>\n\n<div class=\"viewcode-block\" id=\"DeployableDeployer.ask_for_new_version_handle\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.deploy.DeployableDeployer.ask_for_new_version_handle\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">ask_for_new_version_handle</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">manifest</span><span class=\"p\">:</span> <span class=\"n\">Manifest</span><span class=\"p\">,</span> <span class=\"n\">was_missing</span><span class=\"p\">:</span> <span class=\"nb\">bool</span> <span class=\"o\">=</span> <span class=\"kc\">False</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">was_missing</span><span class=\"p\">:</span>\n            <span class=\"n\">try_again</span> <span class=\"o\">=</span> <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">confirm</span><span class=\"p\">(</span>\n                <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">style</span><span class=\"p\">(</span>\n                    <span class=\"sa\">f</span><span class=\"s2\">&quot;</span><span class=\"se\">\\n</span><span class=\"s2\">It looks like that version [</span><span class=\"si\">{</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">version</span><span class=\"si\">}</span><span class=\"s2\">] has already been deployed. Would you like to change the version handle and try again?&quot;</span><span class=\"p\">,</span>\n                    <span class=\"n\">fg</span><span class=\"o\">=</span><span class=\"s2\">&quot;yellow&quot;</span><span class=\"p\">,</span>\n                <span class=\"p\">),</span>\n                <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n            <span class=\"p\">)</span>\n            <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">try_again</span><span class=\"p\">:</span>\n                <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">get_current_context</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">abort</span><span class=\"p\">()</span>\n\n        <span class=\"n\">default_new</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;1.0.0&quot;</span>\n        <span class=\"k\">try</span><span class=\"p\">:</span>\n            <span class=\"n\">default_new</span> <span class=\"o\">=</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">VersionInfo</span><span class=\"o\">.</span><span class=\"n\">parse</span><span class=\"p\">(</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">version</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">next_version</span><span class=\"p\">(</span><span class=\"s2\">&quot;prerelease&quot;</span><span class=\"p\">))</span>\n        <span class=\"k\">except</span> <span class=\"ne\">ValueError</span><span class=\"p\">:</span>\n            <span class=\"k\">pass</span>\n        <span class=\"n\">old_archive_path</span> <span class=\"o\">=</span> <span class=\"n\">get_archive_path</span><span class=\"p\">(</span><span class=\"n\">manifest</span><span class=\"p\">)</span>\n        <span class=\"n\">new_version_handle</span> <span class=\"o\">=</span> <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">prompt</span><span class=\"p\">(</span>\n            <span class=\"s2\">&quot;What should the new version be? Valid characters are a-z, 0-9, . and -&quot;</span><span class=\"p\">,</span>\n            <span class=\"n\">value_proc</span><span class=\"o\">=</span><span class=\"n\">validate_version_handle</span><span class=\"p\">,</span>\n            <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"n\">default_new</span><span class=\"p\">,</span>\n        <span class=\"p\">)</span>\n        <span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">version</span> <span class=\"o\">=</span> <span class=\"n\">new_version_handle</span>\n        <span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\n        <span class=\"n\">new_archive_path</span> <span class=\"o\">=</span> <span class=\"n\">get_archive_path</span><span class=\"p\">(</span><span class=\"n\">manifest</span><span class=\"p\">)</span>\n        <span class=\"n\">old_archive_path</span><span class=\"o\">.</span><span class=\"n\">rename</span><span class=\"p\">(</span><span class=\"n\">new_archive_path</span><span class=\"p\">)</span></div></div>\n\n\n<div class=\"viewcode-block\" id=\"PackageDeployer\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.deploy.PackageDeployer\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">PackageDeployer</span><span class=\"p\">(</span><span class=\"n\">DeployableDeployer</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"nf\">_create_version</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">client</span><span class=\"p\">:</span> <span class=\"n\">Steamship</span><span class=\"p\">,</span> <span class=\"n\">manifest</span><span class=\"p\">:</span> <span class=\"n\">Manifest</span><span class=\"p\">,</span> <span class=\"n\">thing_id</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"n\">PackageVersion</span><span class=\"o\">.</span><span class=\"n\">create</span><span class=\"p\">(</span>\n            <span class=\"n\">client</span><span class=\"o\">=</span><span class=\"n\">client</span><span class=\"p\">,</span>\n            <span class=\"n\">config_template</span><span class=\"o\">=</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">config_template_as_dict</span><span class=\"p\">(),</span>\n            <span class=\"n\">handle</span><span class=\"o\">=</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">version</span><span class=\"p\">,</span>\n            <span class=\"n\">filename</span><span class=\"o\">=</span><span class=\"sa\">f</span><span class=\"s2\">&quot;build/archives/</span><span class=\"si\">{</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">handle</span><span class=\"si\">}</span><span class=\"s2\">_v</span><span class=\"si\">{</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">version</span><span class=\"si\">}</span><span class=\"s2\">.zip&quot;</span><span class=\"p\">,</span>\n            <span class=\"n\">package_id</span><span class=\"o\">=</span><span class=\"n\">thing_id</span><span class=\"p\">,</span>\n        <span class=\"p\">)</span>\n\n<div class=\"viewcode-block\" id=\"PackageDeployer.create_object\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.deploy.PackageDeployer.create_object\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">create_object</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">client</span><span class=\"p\">:</span> <span class=\"n\">Steamship</span><span class=\"p\">,</span> <span class=\"n\">manifest</span><span class=\"p\">:</span> <span class=\"n\">Manifest</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"n\">Package</span><span class=\"o\">.</span><span class=\"n\">create</span><span class=\"p\">(</span>\n            <span class=\"n\">client</span><span class=\"p\">,</span>\n            <span class=\"n\">handle</span><span class=\"o\">=</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">handle</span><span class=\"p\">,</span>\n            <span class=\"n\">profile</span><span class=\"o\">=</span><span class=\"n\">manifest</span><span class=\"p\">,</span>\n            <span class=\"n\">is_public</span><span class=\"o\">=</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">public</span><span class=\"p\">,</span>\n            <span class=\"n\">fetch_if_exists</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n        <span class=\"p\">)</span></div>\n\n<div class=\"viewcode-block\" id=\"PackageDeployer.update_object\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.deploy.PackageDeployer.update_object\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">update_object</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">deployable</span><span class=\"p\">,</span> <span class=\"n\">client</span><span class=\"p\">:</span> <span class=\"n\">Steamship</span><span class=\"p\">,</span> <span class=\"n\">manifest</span><span class=\"p\">:</span> <span class=\"n\">Manifest</span><span class=\"p\">):</span>\n        <span class=\"n\">deployable</span><span class=\"o\">.</span><span class=\"n\">profile</span> <span class=\"o\">=</span> <span class=\"n\">manifest</span>\n\n        <span class=\"n\">package</span> <span class=\"o\">=</span> <span class=\"n\">deployable</span><span class=\"o\">.</span><span class=\"n\">update</span><span class=\"p\">(</span><span class=\"n\">client</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">package</span></div>\n\n<div class=\"viewcode-block\" id=\"PackageDeployer.deployable_type\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.deploy.PackageDeployer.deployable_type\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">deployable_type</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"s2\">&quot;package&quot;</span></div></div>\n\n\n<div class=\"viewcode-block\" id=\"PluginDeployer\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.deploy.PluginDeployer\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">PluginDeployer</span><span class=\"p\">(</span><span class=\"n\">DeployableDeployer</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"nf\">_create_version</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">client</span><span class=\"p\">:</span> <span class=\"n\">Steamship</span><span class=\"p\">,</span> <span class=\"n\">manifest</span><span class=\"p\">:</span> <span class=\"n\">Manifest</span><span class=\"p\">,</span> <span class=\"n\">thing_id</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"n\">PluginVersion</span><span class=\"o\">.</span><span class=\"n\">create</span><span class=\"p\">(</span>\n            <span class=\"n\">client</span><span class=\"o\">=</span><span class=\"n\">client</span><span class=\"p\">,</span>\n            <span class=\"n\">config_template</span><span class=\"o\">=</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">config_template_as_dict</span><span class=\"p\">(),</span>\n            <span class=\"n\">handle</span><span class=\"o\">=</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">version</span><span class=\"p\">,</span>\n            <span class=\"n\">filename</span><span class=\"o\">=</span><span class=\"sa\">f</span><span class=\"s2\">&quot;build/archives/</span><span class=\"si\">{</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">handle</span><span class=\"si\">}</span><span class=\"s2\">_v</span><span class=\"si\">{</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">version</span><span class=\"si\">}</span><span class=\"s2\">.zip&quot;</span><span class=\"p\">,</span>\n            <span class=\"n\">plugin_id</span><span class=\"o\">=</span><span class=\"n\">thing_id</span><span class=\"p\">,</span>\n        <span class=\"p\">)</span>\n\n<div class=\"viewcode-block\" id=\"PluginDeployer.create_object\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.deploy.PluginDeployer.create_object\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">create_object</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">client</span><span class=\"p\">:</span> <span class=\"n\">Steamship</span><span class=\"p\">,</span> <span class=\"n\">manifest</span><span class=\"p\">:</span> <span class=\"n\">Manifest</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"n\">Plugin</span><span class=\"o\">.</span><span class=\"n\">create</span><span class=\"p\">(</span>\n            <span class=\"n\">client</span><span class=\"p\">,</span>\n            <span class=\"n\">description</span><span class=\"o\">=</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">description</span><span class=\"p\">,</span>\n            <span class=\"n\">is_public</span><span class=\"o\">=</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">public</span><span class=\"p\">,</span>\n            <span class=\"n\">transport</span><span class=\"o\">=</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">plugin</span><span class=\"o\">.</span><span class=\"n\">transport</span><span class=\"p\">,</span>\n            <span class=\"n\">type_</span><span class=\"o\">=</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">plugin</span><span class=\"o\">.</span><span class=\"n\">type</span><span class=\"p\">,</span>\n            <span class=\"n\">handle</span><span class=\"o\">=</span><span class=\"n\">manifest</span><span class=\"o\">.</span><span class=\"n\">handle</span><span class=\"p\">,</span>\n            <span class=\"n\">fetch_if_exists</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n        <span class=\"p\">)</span></div>\n\n<div class=\"viewcode-block\" id=\"PluginDeployer.update_object\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.deploy.PluginDeployer.update_object\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">update_object</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">deployable</span><span class=\"p\">,</span> <span class=\"n\">client</span><span class=\"p\">:</span> <span class=\"n\">Steamship</span><span class=\"p\">,</span> <span class=\"n\">manifest</span><span class=\"p\">:</span> <span class=\"n\">Manifest</span><span class=\"p\">):</span>\n        <span class=\"n\">deployable</span><span class=\"o\">.</span><span class=\"n\">profile</span> <span class=\"o\">=</span> <span class=\"n\">manifest</span>\n\n        <span class=\"n\">plugin</span> <span class=\"o\">=</span> <span class=\"n\">deployable</span><span class=\"o\">.</span><span class=\"n\">update</span><span class=\"p\">(</span><span class=\"n\">client</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">plugin</span></div>\n\n<div class=\"viewcode-block\" id=\"PluginDeployer.deployable_type\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.deploy.PluginDeployer.deployable_type\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">deployable_type</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"s2\">&quot;plugin&quot;</span></div></div>\n</pre></div>", "current_page_name": "_modules/steamship/cli/deploy", "sidebars": ["sidebar/brand.html", "sidebar/search.html", "sidebar/scroll-start.html", "sidebar/navigation.html", "sidebar/ethical-ads.html", "sidebar/scroll-end.html", "sidebar/variant-selector.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.12", "furo_version": "2023.03.27", "furo_navigation_tree": "", "furo_hide_toc": true, "furo_pygments": {"light": {"background": "#f8f8f8", "foreground": "black"}, "dark": {"background": "#272822", "foreground": "#f8f8f2"}}}