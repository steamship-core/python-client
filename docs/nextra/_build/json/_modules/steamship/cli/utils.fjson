{"parents": [{"link": "../../../", "title": "Module code"}], "title": "steamship.cli.utils", "body": "<h1>Source code for steamship.cli.utils</h1><div class=\"highlight\"><pre>\n<span></span><span class=\"sd\">&quot;&quot;&quot;Common utilities for the Steamship Python API&quot;&quot;&quot;</span>\n<span class=\"kn\">import</span> <span class=\"nn\">os</span>\n<span class=\"kn\">import</span> <span class=\"nn\">sys</span>\n<span class=\"kn\">import</span> <span class=\"nn\">traceback</span>\n<span class=\"kn\">from</span> <span class=\"nn\">importlib</span> <span class=\"kn\">import</span> <span class=\"n\">machinery</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pathlib</span> <span class=\"kn\">import</span> <span class=\"n\">Path</span>\n\n<span class=\"kn\">import</span> <span class=\"nn\">click</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">steamship.base.error</span> <span class=\"kn\">import</span> <span class=\"n\">SteamshipError</span>\n\n\n<div class=\"viewcode-block\" id=\"find_api_py\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.utils.find_api_py\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">find_api_py</span><span class=\"p\">()</span> <span class=\"o\">-&gt;</span> <span class=\"n\">Path</span><span class=\"p\">:</span>\n    <span class=\"n\">path</span> <span class=\"o\">=</span> <span class=\"n\">Path</span><span class=\"p\">(</span><span class=\"s2\">&quot;src/api.py&quot;</span><span class=\"p\">)</span>\n    <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">exists</span><span class=\"p\">():</span>\n        <span class=\"n\">path</span> <span class=\"o\">=</span> <span class=\"n\">Path</span><span class=\"p\">(</span><span class=\"s2\">&quot;api.py&quot;</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">exists</span><span class=\"p\">():</span>\n            <span class=\"k\">raise</span> <span class=\"n\">SteamshipError</span><span class=\"p\">(</span><span class=\"s2\">&quot;Could not find api.py either in root directory or in src.&quot;</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">path</span></div>\n\n\n<div class=\"viewcode-block\" id=\"get_api_module\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.utils.get_api_module\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">get_api_module</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">:</span> <span class=\"n\">Path</span><span class=\"p\">):</span>\n    <span class=\"k\">try</span><span class=\"p\">:</span>\n        <span class=\"n\">sys</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">parent</span><span class=\"o\">.</span><span class=\"n\">absolute</span><span class=\"p\">()))</span>\n\n        <span class=\"c1\"># load the API module to allow config inspection / generation</span>\n        <span class=\"k\">return</span> <span class=\"n\">machinery</span><span class=\"o\">.</span><span class=\"n\">SourceFileLoader</span><span class=\"p\">(</span><span class=\"s2\">&quot;api&quot;</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">))</span><span class=\"o\">.</span><span class=\"n\">load_module</span><span class=\"p\">()</span>\n    <span class=\"k\">except</span> <span class=\"ne\">Exception</span><span class=\"p\">:</span>\n        <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">secho</span><span class=\"p\">(</span>\n            <span class=\"s2\">&quot;An error occurred while loading your api.py to check configuration parameters. Full stack trace below.&quot;</span><span class=\"p\">,</span>\n            <span class=\"n\">fg</span><span class=\"o\">=</span><span class=\"s2\">&quot;red&quot;</span><span class=\"p\">,</span>\n        <span class=\"p\">)</span>\n        <span class=\"n\">traceback</span><span class=\"o\">.</span><span class=\"n\">print_exc</span><span class=\"p\">()</span>\n        <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">get_current_context</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">abort</span><span class=\"p\">()</span>\n        <span class=\"k\">return</span> <span class=\"kc\">None</span></div>\n\n\n<div class=\"viewcode-block\" id=\"is_in_replit\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.utils.is_in_replit\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">is_in_replit</span><span class=\"p\">()</span> <span class=\"o\">-&gt;</span> <span class=\"nb\">bool</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"sd\">&quot;&quot;&quot;Returns True if the user appears to be inside Replit.&quot;&quot;&quot;</span>\n    <span class=\"k\">if</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">environ</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">&quot;REPLIT_CLI&quot;</span><span class=\"p\">)</span> <span class=\"ow\">or</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">environ</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">&quot;REPLIT_DB_URL&quot;</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"kc\">True</span>\n\n    <span class=\"k\">return</span> <span class=\"kc\">False</span></div>\n</pre></div>", "current_page_name": "_modules/steamship/cli/utils", "sidebars": ["sidebar/brand.html", "sidebar/search.html", "sidebar/scroll-start.html", "sidebar/navigation.html", "sidebar/ethical-ads.html", "sidebar/scroll-end.html", "sidebar/variant-selector.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.12", "furo_version": "2023.03.27", "furo_navigation_tree": "", "furo_hide_toc": true, "furo_pygments": {"light": {"background": "#f8f8f8", "foreground": "black"}, "dark": {"background": "#272822", "foreground": "#f8f8f2"}}}