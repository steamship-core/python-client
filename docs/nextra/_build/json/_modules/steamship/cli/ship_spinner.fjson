{"parents": [{"link": "../../../", "title": "Module code"}], "title": "steamship.cli.ship_spinner", "body": "<h1>Source code for steamship.cli.ship_spinner</h1><div class=\"highlight\"><pre>\n<span></span><span class=\"kn\">import</span> <span class=\"nn\">itertools</span>\n<span class=\"kn\">import</span> <span class=\"nn\">threading</span>\n\n<span class=\"kn\">import</span> <span class=\"nn\">click</span>\n\n\n<div class=\"viewcode-block\" id=\"Spinner\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.ship_spinner.Spinner\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">Spinner</span><span class=\"p\">(</span><span class=\"nb\">object</span><span class=\"p\">):</span>\n    <span class=\"c1\"># [&quot;   \ud83d\udea2&quot;, &quot;  \ud83d\udea2 &quot;, &quot; \ud83d\udea2  &quot;, &quot;\ud83d\udea2   &quot;]</span>\n    <span class=\"c1\"># Unfortunately, backspacing doesn&#39;t seem to work correctly for emoji in iTerm, so leaving the &quot;spinner&quot;</span>\n    <span class=\"c1\"># as adding ships for now</span>\n    <span class=\"n\">spinner_cycle</span> <span class=\"o\">=</span> <span class=\"n\">itertools</span><span class=\"o\">.</span><span class=\"n\">cycle</span><span class=\"p\">([</span><span class=\"s2\">&quot;\ud83d\udea2&quot;</span><span class=\"p\">])</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">stop_running</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">spin_thread</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n\n<div class=\"viewcode-block\" id=\"Spinner.start\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.ship_spinner.Spinner.start\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">start</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">stop_running</span> <span class=\"o\">=</span> <span class=\"n\">threading</span><span class=\"o\">.</span><span class=\"n\">Event</span><span class=\"p\">()</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">spin_thread</span> <span class=\"o\">=</span> <span class=\"n\">threading</span><span class=\"o\">.</span><span class=\"n\">Thread</span><span class=\"p\">(</span><span class=\"n\">target</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">init_spin</span><span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">spin_thread</span><span class=\"o\">.</span><span class=\"n\">start</span><span class=\"p\">()</span></div>\n\n<div class=\"viewcode-block\" id=\"Spinner.stop\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.ship_spinner.Spinner.stop\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">stop</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">spin_thread</span><span class=\"p\">:</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">stop_running</span><span class=\"o\">.</span><span class=\"n\">set</span><span class=\"p\">()</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">spin_thread</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">()</span></div>\n\n<div class=\"viewcode-block\" id=\"Spinner.init_spin\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.ship_spinner.Spinner.init_spin\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">init_spin</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">while</span> <span class=\"ow\">not</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">stop_running</span><span class=\"o\">.</span><span class=\"n\">is_set</span><span class=\"p\">():</span>\n            <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">echo</span><span class=\"p\">(</span><span class=\"nb\">next</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">spinner_cycle</span><span class=\"p\">),</span> <span class=\"n\">nl</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">stop_running</span><span class=\"o\">.</span><span class=\"n\">wait</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span></div>\n            <span class=\"c1\"># click.echo(&quot;\\b&quot;, nl=False)</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__enter__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">start</span><span class=\"p\">()</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__exit__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">exc_type</span><span class=\"p\">,</span> <span class=\"n\">exc_val</span><span class=\"p\">,</span> <span class=\"n\">exc_tb</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">stop</span><span class=\"p\">()</span>\n        <span class=\"k\">return</span> <span class=\"kc\">False</span></div>\n\n\n<div class=\"viewcode-block\" id=\"ship_spinner\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.cli/#steamship.cli.ship_spinner.ship_spinner\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">ship_spinner</span><span class=\"p\">():</span>\n<span class=\"w\">    </span><span class=\"sd\">&quot;&quot;&quot;This function creates a context manager that is used to display a</span>\n<span class=\"sd\">    spinner on stdout as long as the context has not exited.</span>\n<span class=\"sd\">    The spinner is created only if stdout is not redirected, or if the spinner</span>\n<span class=\"sd\">    is forced using the `force` parameter.</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n    <span class=\"k\">return</span> <span class=\"n\">Spinner</span><span class=\"p\">()</span></div>\n</pre></div>", "current_page_name": "_modules/steamship/cli/ship_spinner", "sidebars": ["sidebar/brand.html", "sidebar/search.html", "sidebar/scroll-start.html", "sidebar/navigation.html", "sidebar/ethical-ads.html", "sidebar/scroll-end.html", "sidebar/variant-selector.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.12", "furo_version": "2023.03.27", "furo_navigation_tree": "", "furo_hide_toc": true, "furo_pygments": {"light": {"background": "#f8f8f8", "foreground": "black"}, "dark": {"background": "#272822", "foreground": "#f8f8f2"}}}