{"parents": [{"link": "../../../", "title": "Module code"}], "title": "steamship.utils.url", "body": "<h1>Source code for steamship.utils.url</h1><div class=\"highlight\"><pre>\n<span></span><span class=\"kn\">import</span> <span class=\"nn\">logging</span>\n<span class=\"kn\">from</span> <span class=\"nn\">enum</span> <span class=\"kn\">import</span> <span class=\"n\">Enum</span>\n<span class=\"kn\">from</span> <span class=\"nn\">os</span> <span class=\"kn\">import</span> <span class=\"n\">environ</span>\n<span class=\"kn\">from</span> <span class=\"nn\">typing</span> <span class=\"kn\">import</span> <span class=\"n\">Optional</span>\n\n\n<div class=\"viewcode-block\" id=\"Verb\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.utils/#steamship.utils.url.Verb\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">Verb</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Enum</span><span class=\"p\">):</span>\n    <span class=\"n\">GET</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;GET&quot;</span>\n    <span class=\"n\">POST</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;POST&quot;</span></div>\n\n\n<div class=\"viewcode-block\" id=\"is_local\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.utils/#steamship.utils.url.is_local\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">is_local</span><span class=\"p\">(</span><span class=\"n\">base</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"nb\">bool</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"sd\">&quot;&quot;&quot;Check if we are running the client locally.&quot;&quot;&quot;</span>\n    <span class=\"k\">return</span> <span class=\"nb\">any</span><span class=\"p\">(</span>\n        <span class=\"n\">local_base</span> <span class=\"ow\">in</span> <span class=\"n\">base</span>\n        <span class=\"k\">for</span> <span class=\"n\">local_base</span> <span class=\"ow\">in</span> <span class=\"p\">(</span><span class=\"s2\">&quot;localhost&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;127.0.0.1&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;0:0:0:0&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;host.docker.internal&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;/test:&quot;</span><span class=\"p\">)</span>\n    <span class=\"p\">)</span></div>\n\n\n<div class=\"viewcode-block\" id=\"apply_localstack_url_fix\"><a class=\"viewcode-back\" href=\"../../../../api/steamship.utils/#steamship.utils.url.apply_localstack_url_fix\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">apply_localstack_url_fix</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">:</span> <span class=\"n\">Optional</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">])</span> <span class=\"o\">-&gt;</span> <span class=\"n\">Optional</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">]:</span>\n    <span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">debug</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">&quot;URL </span><span class=\"si\">{</span><span class=\"n\">url</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span><span class=\"p\">)</span>\n    <span class=\"n\">localstack_hostname</span> <span class=\"o\">=</span> <span class=\"n\">environ</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">&quot;LOCALSTACK_HOSTNAME&quot;</span><span class=\"p\">)</span>\n    <span class=\"k\">if</span> <span class=\"n\">url</span> <span class=\"ow\">and</span> <span class=\"n\">localstack_hostname</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span> <span class=\"ow\">and</span> <span class=\"n\">localstack_hostname</span> <span class=\"o\">!=</span> <span class=\"s2\">&quot;localhost&quot;</span><span class=\"p\">:</span>\n        <span class=\"k\">for</span> <span class=\"n\">host</span> <span class=\"ow\">in</span> <span class=\"p\">[</span><span class=\"s2\">&quot;127.0.0.1&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;host.docker.internal&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;localstack&quot;</span><span class=\"p\">]:</span>\n            <span class=\"n\">url</span> <span class=\"o\">=</span> <span class=\"n\">url</span><span class=\"o\">.</span><span class=\"n\">replace</span><span class=\"p\">(</span><span class=\"n\">host</span><span class=\"p\">,</span> <span class=\"n\">localstack_hostname</span><span class=\"p\">)</span>\n            <span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">info</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">&quot;Replacing domain </span><span class=\"si\">{</span><span class=\"n\">host</span><span class=\"si\">}</span><span class=\"s2\"> in </span><span class=\"si\">{</span><span class=\"n\">url</span><span class=\"si\">}</span><span class=\"s2\"> with </span><span class=\"si\">{</span><span class=\"n\">localstack_hostname</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">url</span></div>\n</pre></div>", "current_page_name": "_modules/steamship/utils/url", "sidebars": ["sidebar/brand.html", "sidebar/search.html", "sidebar/scroll-start.html", "sidebar/navigation.html", "sidebar/ethical-ads.html", "sidebar/scroll-end.html", "sidebar/variant-selector.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.12", "furo_version": "2023.03.27", "furo_navigation_tree": "", "furo_hide_toc": true, "furo_pygments": {"light": {"background": "#f8f8f8", "foreground": "black"}, "dark": {"background": "#272822", "foreground": "#f8f8f2"}}}