{"parents": [{"link": "../", "title": "Developing Packages and Plugins"}], "prev": {"link": "../deploying/", "title": "Deploying"}, "next": {"link": "../../api/modules/", "title": "steamship"}, "title": "Monitoring", "meta": {}, "body": "<section id=\"monitoring\">\n<span id=\"id1\"></span><h1>Monitoring<a class=\"headerlink\" href=\"#monitoring\" title=\"Permalink to this heading\">#</a></h1>\n<p>Steamship enables easy monitoring of the health and behavior of your running\n<a class=\"reference internal\" href=\"../../packages/#packages\"><span class=\"std std-ref\">Packages</span></a> and <a class=\"reference internal\" href=\"../../plugins/#plugins\"><span class=\"std std-ref\">Plugins</span></a>.</p>\n<section id=\"monitoring-via-web\">\n<h2>Monitoring via Web<a class=\"headerlink\" href=\"#monitoring-via-web\" title=\"Permalink to this heading\">#</a></h2>\n<p>Steamship\u2019s website provides a hub for monitoring your packages and plugins. The monitoring page for\nan instance provides application logs, a detailed breakdown of usage, and a view of related\n<a class=\"reference internal\" href=\"../../plugins/using/tasks/#tasks\"><span class=\"std std-ref\">Tasks</span></a>.</p>\n<p>To access the monitoring page for an instance, visit the instance page. For example, for a package instance,\nyou will need both the <code class=\"docutils literal notranslate\"><span class=\"pre\">workspace_handle</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">package_instance_handle</span></code> for your instance to find the URL.</p>\n<p>Visit: <code class=\"docutils literal notranslate\"><span class=\"pre\">https://www.steamship.com/workspaces/{workspace_handle}/packages/{package_instance_handle}/monitor</span></code> to\naccess the Steamship monitoring.</p>\n<section id=\"logs\">\n<h3>Logs<a class=\"headerlink\" href=\"#logs\" title=\"Permalink to this heading\">#</a></h3>\n<img alt=\"Web view of Package Instance Logs\" src=\"../../_images/logs-example.png\" />\n</section>\n<section id=\"usage\">\n<h3>Usage<a class=\"headerlink\" href=\"#usage\" title=\"Permalink to this heading\">#</a></h3>\n<img alt=\"Web view of Package Instance Usage\" src=\"../../_images/usage-example.png\" />\n</section>\n<section id=\"tasks\">\n<h3>Tasks<a class=\"headerlink\" href=\"#tasks\" title=\"Permalink to this heading\">#</a></h3>\n<img alt=\"Web view of Package Instance Tasks\" src=\"../../_images/tasks-example.png\" />\n</section>\n</section>\n<section id=\"using-logging-in-instances\">\n<h2>Using Logging in Instances<a class=\"headerlink\" href=\"#using-logging-in-instances\" title=\"Permalink to this heading\">#</a></h2>\n<p>Our logging integration helps monitor the behavior of deployed instances, providing detailed\ninformation about critical state in your deployments. You may add your own custom logging statements to\nyour <a class=\"reference internal\" href=\"../../packages/#packages\"><span class=\"std std-ref\">Packages</span></a> and <a class=\"reference internal\" href=\"../../plugins/#plugins\"><span class=\"std std-ref\">Plugins</span></a> to help in your development of new features, or to troubleshoot behavior in\nexisting instances.</p>\n<p>Add custom logs using the Python <code class=\"docutils literal notranslate\"><span class=\"pre\">logging</span></code> library:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">logging</span>\n<span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">info</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s1\">&#39;running agent with prompt: </span><span class=\"si\">{</span><span class=\"n\">prompt</span><span class=\"si\">}</span><span class=\"s1\">&#39;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>It is also possible to add extra structured fields to your generated log entries to help in filtered retrieval later:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">logging</span>\n<span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">info</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s1\">&#39;running agent with prompt: </span><span class=\"si\">{</span><span class=\"n\">prompt</span><span class=\"si\">}</span><span class=\"s1\">&#39;</span><span class=\"p\">,</span>\n             <span class=\"n\">extra</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">&#39;request_id&#39;</span><span class=\"p\">:</span> <span class=\"n\">request_id</span><span class=\"p\">,</span> <span class=\"s1\">&#39;user&#39;</span><span class=\"p\">:</span> <span class=\"n\">user</span><span class=\"p\">}</span>\n<span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>When a deployed instance is running, all logs at the <code class=\"docutils literal notranslate\"><span class=\"pre\">INFO</span></code> level and above will be generated, processed by Steamship,\nand made available for retrieval within a few minutes.</p>\n</section>\n<section id=\"logs-retrieval-with-ship-cli\">\n<h2>Logs Retrieval with <code class=\"docutils literal notranslate\"><span class=\"pre\">ship</span></code> CLI<a class=\"headerlink\" href=\"#logs-retrieval-with-ship-cli\" title=\"Permalink to this heading\">#</a></h2>\n<p>To look up logs via the Steamship CLI, use the <code class=\"docutils literal notranslate\"><span class=\"pre\">ship</span> <span class=\"pre\">logs</span></code> command. It will return a JSON object that contains\nthe relevant log entries.</p>\n<p>Here is an example command to retrieve logs with extra fields in the example workspace <code class=\"docutils literal notranslate\"><span class=\"pre\">steamship-example-logs-001</span></code>:</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>ship<span class=\"w\"> </span>logs<span class=\"w\"> </span>-w<span class=\"w\"> </span>steamship-example-logs-001<span class=\"w\"> </span>-f<span class=\"w\"> </span><span class=\"s2\">&quot;request_id=99999999&quot;</span>\n</pre></div>\n</div>\n<p>Because <code class=\"docutils literal notranslate\"><span class=\"pre\">ship</span> <span class=\"pre\">logs</span></code> returns JSON, you can use <a class=\"reference external\" href=\"https://jqlang.github.io/jq/\">jq</a> to help trim the output to meet your needs:</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>ship<span class=\"w\"> </span>logs<span class=\"w\"> </span>-w<span class=\"w\"> </span>steamship-example-logs-001<span class=\"w\"> </span>-f<span class=\"w\"> </span><span class=\"s2\">&quot;request_id=99999999&quot;</span><span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>jq<span class=\"w\"> </span><span class=\"s1\">&#39;.entries[].message&#39;</span>\n</pre></div>\n</div>\n<p>For full information on how to use <code class=\"docutils literal notranslate\"><span class=\"pre\">ship</span> <span class=\"pre\">logs</span></code>, run:</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>ship<span class=\"w\"> </span>logs<span class=\"w\"> </span>--help\n</pre></div>\n</div>\n</section>\n</section>\n", "metatags": "<meta name=\"generator\" content=\"Docutils 0.17.1: http://docutils.sourceforge.net/\" />\n", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["api/modules", "steamship", "N", "next"], ["developing/deploying", "Deploying", "P", "previous"]], "sourcename": "developing/monitoring.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Monitoring</a><ul>\n<li><a class=\"reference internal\" href=\"#monitoring-via-web\">Monitoring via Web</a><ul>\n<li><a class=\"reference internal\" href=\"#logs\">Logs</a></li>\n<li><a class=\"reference internal\" href=\"#usage\">Usage</a></li>\n<li><a class=\"reference internal\" href=\"#tasks\">Tasks</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#using-logging-in-instances\">Using Logging in Instances</a></li>\n<li><a class=\"reference internal\" href=\"#logs-retrieval-with-ship-cli\">Logs Retrieval with <code class=\"docutils literal notranslate\"><span class=\"pre\">ship</span></code> CLI</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "current_page_name": "developing/monitoring", "sidebars": ["sidebar/brand.html", "sidebar/search.html", "sidebar/scroll-start.html", "sidebar/navigation.html", "sidebar/ethical-ads.html", "sidebar/scroll-end.html", "sidebar/variant-selector.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.12", "furo_version": "2023.03.27", "furo_navigation_tree": "", "furo_hide_toc": false, "furo_pygments": {"light": {"background": "#f8f8f8", "foreground": "black"}, "dark": {"background": "#272822", "foreground": "#f8f8f2"}}}