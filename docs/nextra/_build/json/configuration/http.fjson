{"parents": [{"link": "../", "title": "Configuration"}], "prev": {"link": "../cli/", "title": "Steamship CLI"}, "next": {"link": "../../agents/", "title": "Agents"}, "title": "HTTP Operation", "meta": null, "body": "<section id=\"http-operation\">\n<span id=\"http\"></span><h1>HTTP Operation<a class=\"headerlink\" href=\"#http-operation\" title=\"Permalink to this heading\">#</a></h1>\n<p>Our client library is designed to broker all communication to Steamship,\nbut our API supports HTTP operation if desired.</p>\n<section id=\"requests\">\n<h2>Requests<a class=\"headerlink\" href=\"#requests\" title=\"Permalink to this heading\">#</a></h2>\n<p>In general, most API requests consist of an HTTP <code class=\"docutils literal notranslate\"><span class=\"pre\">POST</span></code> with a JSON payload.\nFor such requests, make sure to set the <code class=\"docutils literal notranslate\"><span class=\"pre\">Content-Type</span></code> header as follows:</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>Content-Type:<span class=\"w\"> </span>application/json\n</pre></div>\n</div>\n<p>Also include your API Key as a Bearer token in the header:</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>Authorization:<span class=\"w\"> </span>Bearer<span class=\"w\"> </span><span class=\"o\">{</span>your-token<span class=\"o\">}</span>\n</pre></div>\n</div>\n<section id=\"optional-headers\">\n<h3>Optional Headers<a class=\"headerlink\" href=\"#optional-headers\" title=\"Permalink to this heading\">#</a></h3>\n<p>All API requests take place within the context of a <a class=\"reference internal\" href=\"../../data/workspaces/#workspaces\"><span class=\"std std-ref\">Workspace</span></a>.\nIf you do not specify the workspace, you are using your <code class=\"docutils literal notranslate\"><span class=\"pre\">default</span></code> workspace.</p>\n<p>To set the workspace in an API request, use the following header:</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>X-Workspace-Handle:<span class=\"w\"> </span><span class=\"o\">{</span>your-workspace-handle<span class=\"o\">}</span>\n</pre></div>\n</div>\n</section>\n<section id=\"engine-response-format\">\n<h3>Engine Response Format<a class=\"headerlink\" href=\"#engine-response-format\" title=\"Permalink to this heading\">#</a></h3>\n<p>All Steamship Engine API responses use the following JSON format over the wire.\nEach field is optional.</p>\n<div class=\"highlight-json notranslate\"><div class=\"highlight\"><pre><span></span>{\n  &quot;data&quot;:any,\n  &quot;task&quot;: {\n    &quot;taskId&quot;:string,\n    &quot;taskState&quot;: &quot;creating&quot; | &quot;waiting&quot; | &quot;running&quot; | &quot;succeeded&quot; | &quot;failed&quot;,\n    &quot;taskMessage&quot;: string,\n    &quot;taskCreatedOn&quot;: string,\n    &quot;taskLastModifiedOn&quot;:string\n  }\n}\n</pre></div>\n</div>\n<p>In this response structure:</p>\n<ul class=\"simple\">\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">data</span></code> contains the operation results, if available</p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">task</span></code> contains the operation progress, if it is still underway or if it has failed.</p></li>\n</ul>\n</section>\n</section>\n<section id=\"creating-a-package-instance\">\n<h2>Creating a Package Instance<a class=\"headerlink\" href=\"#creating-a-package-instance\" title=\"Permalink to this heading\">#</a></h2>\n<p>Steamship packages are listed in our <a class=\"reference external\" href=\"https://www.steamship.com/packages\">package directory</a>.\nTo create one, sent an HTTP post with the following information:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">POST</span> <span class=\"n\">https</span><span class=\"p\">:</span><span class=\"o\">//</span><span class=\"n\">api</span><span class=\"o\">.</span><span class=\"n\">steamship</span><span class=\"o\">.</span><span class=\"n\">com</span><span class=\"o\">/</span><span class=\"n\">api</span><span class=\"o\">/</span><span class=\"n\">v1</span><span class=\"o\">/</span><span class=\"n\">package</span><span class=\"o\">/</span><span class=\"n\">instance</span><span class=\"o\">/</span><span class=\"n\">create</span>\n<span class=\"p\">{</span>\n  <span class=\"s2\">&quot;packageHandle&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;the-package-handle&quot;</span><span class=\"p\">,</span>\n  <span class=\"s2\">&quot;handle&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;your-new-instance-handle&quot;</span><span class=\"p\">,</span>\n  <span class=\"s2\">&quot;packageVersionHandle: &quot;</span><span class=\"n\">optional</span><span class=\"o\">-</span><span class=\"n\">version</span><span class=\"o\">-</span><span class=\"n\">handle</span><span class=\"s2\">&quot;,</span>\n  <span class=\"s2\">&quot;fetchIfExists&quot;</span><span class=\"p\">:</span> <span class=\"n\">true</span><span class=\"p\">,</span>\n  <span class=\"s2\">&quot;config&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"s2\">&quot;key1&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;value1&quot;</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n<p>In the above POST request, the <strong>packageHandle</strong> references the package you\u2019d like to use.\nThe <strong>handle</strong> creates a private stack for data and infrastructure that package depends on.</p>\n<p>The result will include a JSON object containing information about your new instance.</p>\n</section>\n<section id=\"invoking-a-package-method\">\n<h2>Invoking a Package Method<a class=\"headerlink\" href=\"#invoking-a-package-method\" title=\"Permalink to this heading\">#</a></h2>\n<p>Once you have a package instance, you can invoke a methods on it over HTTP.\nGet the workspace handle and package instance handle from the response of your instance creation request.</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">POST</span> <span class=\"n\">https</span><span class=\"p\">:</span><span class=\"o\">//</span><span class=\"p\">{</span><span class=\"n\">username</span><span class=\"p\">}</span><span class=\"o\">.</span><span class=\"n\">steamship</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"o\">/</span><span class=\"p\">{</span><span class=\"n\">workspace</span><span class=\"o\">-</span><span class=\"n\">handle</span><span class=\"p\">}</span><span class=\"o\">/</span><span class=\"p\">{</span><span class=\"n\">instance</span><span class=\"o\">-</span><span class=\"n\">handle</span><span class=\"p\">}</span><span class=\"o\">/</span><span class=\"n\">method</span>\n<span class=\"p\">{</span>\n  <span class=\"s2\">&quot;JSON&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;BODY&quot;</span>\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n</section>\n</section>\n", "metatags": "<meta name=\"generator\" content=\"Docutils 0.17.1: http://docutils.sourceforge.net/\" />\n", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["agents/index", "Agents", "N", "next"], ["configuration/cli", "Steamship CLI", "P", "previous"]], "sourcename": "configuration/http.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">HTTP Operation</a><ul>\n<li><a class=\"reference internal\" href=\"#requests\">Requests</a><ul>\n<li><a class=\"reference internal\" href=\"#optional-headers\">Optional Headers</a></li>\n<li><a class=\"reference internal\" href=\"#engine-response-format\">Engine Response Format</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#creating-a-package-instance\">Creating a Package Instance</a></li>\n<li><a class=\"reference internal\" href=\"#invoking-a-package-method\">Invoking a Package Method</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "current_page_name": "configuration/http", "sidebars": ["sidebar/brand.html", "sidebar/search.html", "sidebar/scroll-start.html", "sidebar/navigation.html", "sidebar/ethical-ads.html", "sidebar/scroll-end.html", "sidebar/variant-selector.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.12", "furo_version": "2023.03.27", "furo_navigation_tree": "", "furo_hide_toc": false, "furo_pygments": {"light": {"background": "#f8f8f8", "foreground": "black"}, "dark": {"background": "#272822", "foreground": "#f8f8f2"}}}